---
title: "Class 4 solutions"
author: "Pernille Brams"
date: "22/2/2024"
output:
  html_document:
    toc: true  
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r libs}
library(pacman)

pacman::p_load(tidyverse,
               ggpubr,
               rstanarm)

```

# By hand or Latex syntax in a .Rmd file
Most of these exercises are easiest solved by hand. However, if you want to write math notation in an R-markdown Latex-syntax can be used. Below are some examples of how latex is used to write math equations. Remember to surround your equation by either $ $ or $$ $$.

Example: 
$\frac{5}{10}$

$$
x^{\frac{a}{b}}=\left(x^a\right)^{\frac{1}{b}}=\left(x^{\frac{1}{b}}\right)^a=\sqrt[b]{x^a}
$$
# Exercises
[Uploading solutions in hand]
In the GILL book (in this order):
1.1
1.2
1.3
1.15
1.4
The rest from the lecture's last slide.

```{r}
f <- function(x) {
  return(5*x/9 - 160/9)
}

# Generate x values
x <- seq(-100, 100, by = 1)

# Calculate y values
y <- f(x)

# Plot
plot(x, y, type = "l", xlab = "x", ylab = "y", main = "Plot of y = 5x/9 - 160/9")

```


# Extra about Bayesian, if you finish early (extra = optional!)
## Ex. 1: Load rstanarm()
```{r}
pacman::p_load(rstanarm)
```


## Ex. 2: Simulate data for a simple linear regression model, y = b0 + b1*X+e, where x is a predictor variable, y is the outcome, and e is the normally distributed error.
```{r}
b0 <- 3
b1 <- 5
x <- seq(-25, 25, by = 0.1)
e <- rnorm(501, 0, 20)

y_plot <- b0 + b1*x + e
plot(y_plot)

data <- data.frame(
  x = x,
  y = y_plot
)
```


## Ex. 3: Fit a Bayesian linear regression model using stan_glm from the rstanarm package with default priors.
```{r}
model <- stan_glm(y ~ x, data = data)
print(summary(model))
```


## Ex. 4: Explain in a few sentences what a prior is (this is difficult stuff, so light level here is totally fine)
The knowledge one has in advance to running the test on that particular set of data formulated as a distribution.


## Ex. 5: Refit model using different priors for b0 and b1.
```{r}
model2 <- stan_glm(y ~ x, data = data,
                   family = gaussian(),
                   prior = (normal(location = 10, scale = 3.1, autoscale = FALSE)),
                   prior_intercept = default_prior_intercept(family))

print(summary(model))
print(summary(model2))

```



